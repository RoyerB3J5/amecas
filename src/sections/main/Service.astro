---
import Button from '../../components/Button.astro';
import CarouselMainGallery from '../../components/CarouselMainGallery.astro';

type Translations = typeof import('../../i18n/es').default;
type ServiceContent = Translations['main']['service'];
interface Props {
  content: ServiceContent;
}
const { content } = Astro.props as Props;
const currentPath = Astro.url.pathname;
const normalized = currentPath.replace(/^\/(en|es)/, '') || '/';
// Detectar el idioma actual ('en' o 'es')
const match = currentPath.match(/^\/(en|es)/);
const lang = match ? match[1] : 'en';
---

<section
  class="bg-[#E5DECC] pt-[70px] md:pt-[39px] flex flex-col justify-center items-center w-full pb-[280px] md:pb-[334px] relative"
>
  <div
    class="w-full max-w-screen md:w-[1211px] px-6 xl:px-0 flex flex-col justify-center items-center gap-[62px]"
    data-aos="zoom-in-down"
    data-aos-offset="200"
  >
    <div
      class="flex flex-col justify-center items-start gap-5 pb-5 border-b border-b-text/30 w-full"
    >
      <p class="text-[16px] font-bold leading-[120%] uppercase text-accent-3">
        {content.text}
      </p>
      <h2 class="text-[36px] font-normal leading-[120%] text-text">
        {content.title}
      </h2>
    </div>
    <div
      class="flex flex-col md:flex-row justify-center items-center gap-6 w-full"
    >
      {
        content.list.map((item, i) => (
          <div
            class={`w-full md:w-1/3 flex flex-col justify-between items-start px-6 ${item.color} py-10 rounded-4xl rounded-br-[100px] h-[455px] relative text-white overflow-hidden`}
          >
            <h3 class="text-[37.5px] font-bold leading-[120%] uppercase">
              {item.label}
            </h3>
            <Button
              text={item.button}
              extraBtnClass="border border-white px-6"
              textClass="text-[16px] uppercase text-white"
              iconClass=" text-white hidden sm:block"
              href={i === 0 ? item.href : `/${lang}/${item.href}`}
              target={i === 0 ? '_blank' : undefined}
              rel={i === 0 ? 'noopener noreferrer' : undefined}
            />
            <img
              src={`/${item.image}.webp`}
              alt="Imagenes de Servicios"
              width="206"
              height="333"
              class="absolute -bottom-0.5 -right-1 w-[206px] h-auto"
            />
          </div>
        ))
      }
    </div>
  </div>
  <div
    class="w-full max-w-screen xl:w-[1211px] px-6 xl:px-0 flex flex-col justify-center items-start gap-10 z-10 absolute bottom-0 translate-y-1/2"
  >
    <h2 class="text-[36px] leading-[120%] font-normal text-start">
      {content.gallery.title}
    </h2>
    <CarouselMainGallery galleryItems={content.gallery.items} />
  </div>
</section>
