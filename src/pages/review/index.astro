---
import '../../styles/global.css';

import { Icon } from 'astro-icon/components';
import Starts from '../../components/Starts';
import LayoutSec from '../../layouts/LayoutSec.astro';
---

<LayoutSec>
  <img
    src="/share-light.svg"
    alt="Compartir"
    class="absolute top-6 right-6 w-6 h-6 cursor-pointer share-btn"
  />
  <section
    class="w-full flex flex-col justify-center items-center h-full"
  >
    <div
      class="w-full flex flex-col justify-center items-center gap-4 min-h-[70vh] bg-accent-1 px-6 py-5"
    >
      <div class="w-full flex flex-col justify-center items-center gap-5">
        <a
          href="/"
          aria-label="Ir a la página principal"
          title="Inicio - Los Amecas"
        >
          <img
            src="/logo.webp"
            alt="Logo de Los Amecas - Restaurante y Taquería"
            width="1130"
            height="204"
            class="cursor-pointer w-[300px] h-auto"
          />
        </a>
        <div class="flex flex-col justify-center items-center">
          <p class="text-[16px] leading-5 max-w-[320px] text-center text-white">
            We hope you loved the experience with <br /> Los Amecas. <br />
            <br />Your feedback means the world to us.
          </p>
        </div>
      </div>
      <hr class="w-[24.5px] h-[3px] text-white" />
      <div
        class="w-full flex flex-col justify-center items-center gap-4 relative min-h-[120px] overflow-hidden"
      >
        <div
          class="w-[350px] h-full overflow-hidden absolute bg-accent-3 rounded-[20px]"
        >
        </div>
        <div
          class="flex flex-col justify-center items-center z-10 bg-secondary py-4 rounded-[15px] overflow-hidden"
        >
          <p
            class="text-[12px] font-bold text-center text-white leading-[15px] w-[226px] mb-2"
          >
            Please tap the option that best reflects the quality of our service.
          </p>
          <Starts client:idle />
        </div>
      </div>
    </div>

    <section
      class="flex flex-col justify-center items-center gap-3 w-full py-[70px] bottom-0 relative"
    >
      <Icon
        name={'fondo-menu'}
        class={'absolute top-0 w-full h-auto z-10 left-0'}
        style="--fondo-color:#F4AA02; --wave-color:#8BCE2B; --dots-color:#F4AA02"
      />
      <div class="flex justify-center items-center gap-3">
        <a
          href="https://www.facebook.com/profile.php?id=100073312594879&ref=_ig_profile_ac"
          class="w-[27px] h-[27px] md:w-[31px] md:h-[31px] rounded-full flex items-center justify-center bg-accent-2 shrink-0"
        >
          <Icon name={'facebook'} class={'w-4  text-main'} />
        </a>
        <a
          href="https://www.instagram.com/taqueriaameca/"
          class="w-[27px] h-[27px] md:w-[31px] md:h-[31px] rounded-full flex items-center justify-center bg-accent-2 shrink-0"
        >
          <Icon name={'instagram'} class={'w-4 h-4  text-main'} />
        </a>
        <a
          href="#"
          class="w-[27px] h-[27px] md:w-[31px] md:h-[31px] rounded-full flex items-center justify-center bg-accent-2 shrink-0"
        >
          <Icon name={'tiktok'} class={'w-4 h-4  text-main'} />
        </a>
      </div>
      <div class="flex flex-col justify-center items-center gap-[9px]">
        <p class="text-[12px] font-normal leading-[140%] text-[#878787]">
          Powered by
        </p>
        <a href="https://inkshapegroup.com/en/">
          <img
            src="/footer-logo.webp"
            alt="Imagen del Footer"
            width="3745"
            height="996"
            class="w-[110px] h-[29px] cursor-pointer"
          />
        </a>
      </div>
    </section>
  </section>
</LayoutSec>
<script is:inline>
  const shareButtons = document.querySelectorAll('.share-btn');
  if (shareButtons && shareButtons.length) {
    shareButtons.forEach((btn) => {
      btn.addEventListener('click', async (e) => {
        e.stopPropagation();
        const shareData = {
          title: 'Nuvision Windows',
          text: 'Renew your home with NuVision quality windows and doors, professional installation.',
          url: window.location.href,
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            return;
          } catch (err) {
            // user cancelled or error; fall through to clipboard fallback
            console.warn('share failed or cancelled', err);
          }
        }

        // Fallback: copy URL to clipboard and notify user
        try {
          await navigator.clipboard.writeText(window.location.href);
          // small user feedback; prefer a non-blocking toast in the future
          alert(
            'Enlace copiado al portapapeles. Pega y comparte donde quieras.'
          );
        } catch (err) {
          // last resort: open native share via mailto as a helper
          console.warn('clipboard write failed', err);
        }
      });
    });
  }
</script>
